<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Natural Gas Combustion Thermodynamics Calculator</title>
    <link rel="stylesheet" href="src/css/main.css">
    <link rel="stylesheet" href="src/css/forms.css">
    <link rel="stylesheet" href="src/css/charts.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Natural Gas Combustion Thermodynamics Calculator</h1>
            <p>Comprehensive analysis of natural gas/air combustion processes</p>
        </header>

        <main>
            <div class="calculator-grid">
                <!-- Input Panel -->
                <section class="input-panel">
                    <h2>Input Parameters</h2>
                    
                    <div class="input-group">
                        <h3>Fuel Composition</h3>
                        <div class="form-row">
                            <label for="ch4">Methane (CH₄) %:</label>
                            <input type="number" id="ch4" value="95" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="c2h6">Ethane (C₂H₆) %:</label>
                            <input type="number" id="c2h6" value="3" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="c3h8">Propane (C₃H₈) %:</label>
                            <input type="number" id="c3h8" value="1" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="c4h10">Butane (C₄H₁₀) %:</label>
                            <input type="number" id="c4h10" value="0.5" min="0" max="100" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="co2">Carbon Dioxide (CO₂) %:</label>
                            <input type="number" id="co2" value="0.5" min="0" max="100" step="0.1">
                        </div>
                    </div>

                    <div class="input-group">
                        <h3>Operating Conditions</h3>
                        <div class="form-row">
                            <label for="fuel-temp">Fuel Temperature (°C):</label>
                            <input type="number" id="fuel-temp" value="25" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="air-temp">Air Temperature (°C):</label>
                            <input type="number" id="air-temp" value="25" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="pressure">Pressure (bar):</label>
                            <input type="number" id="pressure" value="1.013" min="0.1" step="0.001">
                        </div>
                        <div class="form-row">
                            <label for="excess-air">Excess Air (%):</label>
                            <input type="number" id="excess-air" value="20" min="0" max="500" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="fuel-flow">Fuel Flow Rate (kg/h):</label>
                            <input type="number" id="fuel-flow" value="100" min="0.1" step="0.1">
                        </div>
                    </div>

                    <div class="input-group">
                        <h3>Heat Transfer</h3>
                        <div class="form-row">
                            <label for="heat-loss">Heat Loss (%):</label>
                            <input type="number" id="heat-loss" value="5" min="0" max="50" step="0.1">
                        </div>
                        <div class="form-row">
                            <label for="stack-temp">Stack Temperature (°C):</label>
                            <input type="number" id="stack-temp" value="150" step="0.1">
                        </div>
                    </div>

                    <button id="calculate-btn" class="calculate-button">Calculate</button>
                    <button id="reset-btn" class="reset-button">Reset</button>
                </section>

                <!-- Results Panel -->
                <section class="results-panel">
                    <h2>Calculation Results</h2>
                    
                    <div class="results-tabs">
                        <button class="tab-button active" data-tab="combustion">Combustion</button>
                        <button class="tab-button" data-tab="thermodynamics">Thermodynamics</button>
                        <button class="tab-button" data-tab="efficiency">Efficiency</button>
                        <button class="tab-button" data-tab="emissions">Emissions</button>
                    </div>

                    <div id="combustion" class="tab-content active">
                        <h3>Combustion Analysis</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>Stoichiometric Air-Fuel Ratio:</label>
                                <span id="stoich-af-ratio">-</span>
                            </div>
                            <div class="result-item">
                                <label>Actual Air-Fuel Ratio:</label>
                                <span id="actual-af-ratio">-</span>
                            </div>
                            <div class="result-item">
                                <label>Air Flow Rate (kg/h):</label>
                                <span id="air-flow-rate">-</span>
                            </div>
                            <div class="result-item">
                                <label>Flue Gas Flow Rate (kg/h):</label>
                                <span id="flue-gas-flow">-</span>
                            </div>
                        </div>
                        
                        <h4>Flue Gas Composition (% vol, dry)</h4>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>CO₂:</label>
                                <span id="flue-co2">-</span>
                            </div>
                            <div class="result-item">
                                <label>O₂:</label>
                                <span id="flue-o2">-</span>
                            </div>
                            <div class="result-item">
                                <label>N₂:</label>
                                <span id="flue-n2">-</span>
                            </div>
                            <div class="result-item">
                                <label>H₂O:</label>
                                <span id="flue-h2o">-</span>
                            </div>
                        </div>
                    </div>

                    <div id="thermodynamics" class="tab-content">
                        <h3>Thermodynamic Properties</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>Lower Heating Value (MJ/kg):</label>
                                <span id="lhv">-</span>
                            </div>
                            <div class="result-item">
                                <label>Higher Heating Value (MJ/kg):</label>
                                <span id="hhv">-</span>
                            </div>
                            <div class="result-item">
                                <label>Adiabatic Flame Temperature (°C):</label>
                                <span id="flame-temp">-</span>
                            </div>
                            <div class="result-item">
                                <label>Heat Released (MW):</label>
                                <span id="heat-released">-</span>
                            </div>
                            <div class="result-item">
                                <label>Specific Heat Capacity (kJ/kg·K):</label>
                                <span id="cp-flue-gas">-</span>
                            </div>
                            <div class="result-item">
                                <label>Flue Gas Density (kg/m³):</label>
                                <span id="flue-gas-density">-</span>
                            </div>
                        </div>
                    </div>

                    <div id="efficiency" class="tab-content">
                        <h3>Efficiency Analysis</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>Thermal Efficiency (%):</label>
                                <span id="thermal-efficiency">-</span>
                            </div>
                            <div class="result-item">
                                <label>Combustion Efficiency (%):</label>
                                <span id="combustion-efficiency">-</span>
                            </div>
                            <div class="result-item">
                                <label>Stack Loss (%):</label>
                                <span id="stack-loss">-</span>
                            </div>
                            <div class="result-item">
                                <label>Radiation Loss (%):</label>
                                <span id="radiation-loss">-</span>
                            </div>
                            <div class="result-item">
                                <label>Useful Heat Output (MW):</label>
                                <span id="useful-heat">-</span>
                            </div>
                        </div>
                    </div>

                    <div id="emissions" class="tab-content">
                        <h3>Emissions Analysis</h3>
                        <div class="result-grid">
                            <div class="result-item">
                                <label>CO₂ Emissions (kg/h):</label>
                                <span id="co2-emissions">-</span>
                            </div>
                            <div class="result-item">
                                <label>NOₓ Estimate (ppm):</label>
                                <span id="nox-emissions">-</span>
                            </div>
                            <div class="result-item">
                                <label>Specific CO₂ (kg/MWh):</label>
                                <span id="specific-co2">-</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Visualization Panel -->
                <section class="visualization-panel">
                    <h2>Visualization</h2>
                    <div class="chart-container">
                        <canvas id="compositionChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="efficiencyChart"></canvas>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p>Natural Gas Combustion Calculator - Advanced Thermodynamic Analysis</p>
        </footer>
    </div>

    <!-- Load all JavaScript modules -->
    <script src="src/data/constants.js"></script>
    <script src="src/data/gas-data.js"></script>
    <script src="src/js/validators.js"></script>
    <script src="src/js/gas-properties.js"></script>
    <script src="src/js/combustion.js"></script>
    <script src="src/js/thermodynamics.js"></script>
    <script src="src/js/heat-transfer.js"></script>
    <script src="src/js/efficiency.js"></script>
    <script src="src/js/chart-utils.js"></script>
    <script src="src/js/calculator-core.js"></script>
</body>
</html>